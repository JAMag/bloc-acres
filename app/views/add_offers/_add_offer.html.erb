
<div class="panel-appointment">

<div class="row">
  <div>
    <ul class="panel panel-default">
      <button data-toggle="collapse" class="btn btn-primary" href="#offer<%= @property.id %>">
        <i class="fa fa-university" aria-hidden="true"></i>
        Start Contract
      </button>
      <div class="col-md-5" id="suggested_price">
        Suggested Price:

        <h4></h4>
      </div>
      <div class="col-md-5" >
        Asking Price:

        <h4><%=@property.price%></h4>
      </div>
    </ul>
  </div>

</div>
    <div>
      <a title="This is a binding legal contract... consult an attorney before submitting."></a>
    </div>


</div>





  <div class="tab-content">
    <div id="offer<%= @property.id %>" class="collapse">

      <%= form_for [@property, AddOffer.new] do |o| %>

          <div class="row">
            <div class="col-sm-2">

              <div class="btn-group-vertical">
                <button type="button" id="buyers" class="btn btn-primary btn-lg">Buyers</button>
                <button type="button" id="buyeroffers" class="btn btn-primary btn-lg">Buyer Offers</button>
                <button type="button" id="purchprice" class="btn btn-primary btn-lg">Price</button>
                <button type="button" id="duration" class="btn btn-primary btn-lg">Duration</button>
                <button type="button" id="pnsagreement" class="btn btn-primary btn-lg">Agreement</button>
                <button type="button" id="closing" class="btn btn-primary btn-lg">Closing</button>

                <button type="button" id="escrow" class="btn btn-primary btn-lg">Escrow</button>

                <button type="button" id="contingencies" class="btn btn-primary btn-lg">Contingencies</button>

                <button type="button" id="mortgage" class="btn btn-primary btn-lg">Mortgage</button>
                <button type="button" id="inspections" class="btn btn-primary btn-lg">Inspections</button>
                <button type="button" id="representations" class="btn btn-primary btn-lg">Representations</button>

                <button type="button" id="buyerdefault" class="btn btn-primary btn-lg">Buyer Default</button>

                <button type="button" id="addterms" class="btn btn-primary btn-lg">Additional Terms</button>
              </div>

            </div>

            <div class="col-sm-10">
              <div>
                <div id="buyers1" class="panel-default-offer-inner" style="display:none;">


                  <div>
                    <div>
                      Rate the condition of the house.
                    </div>
                  </div>
                  <div class="panel-rating-header-second-last">
                    Kitchen

                    <div class="panel panel-rating">
                      <div class="star-rating1">
                        <%= o.hidden_field :kitchen_rating_percentage, value: '15' %>
                        <%= o.radio_button :kitchen_rating, '-1.0' %> <%= o.label :kitchen_rating, "Replace Imediatley" %>
                        <%= o.radio_button :kitchen_rating, '-0.5' %> <%= o.label :kitchen_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :kitchen_rating, '0.0' %> <%= o.label :kitchen_rating, "average wear and tear" %>
                        <%= o.radio_button :kitchen_rating, '0.5' %> <%= o.label :kitchen_rating, "better than expected" %>
                        <%= o.radio_button :kitchen_rating, '1.0' %> <%= o.label :kitchen_rating, "brand new or ideal" %>

                      </div>
                    </div>
                  </div>
                  <div class="panel-rating-header-last">
                    Bathroom

                    <div class="panel panel-rating">
                      <div class="star-rating2">
                        <%= o.hidden_field :bathroom_rating_percentage, value: '10' %>
                        <%= o.radio_button :bathroom_rating, '-1.0' %> <%= o.label :bathroom_rating, "Replace Immediatley" %>
                        <%= o.radio_button :bathroom_rating, '-0.5' %> <%= o.label :bathroom_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :bathroom_rating, '0.0' %> <%= o.label :bathroom_rating, "average wear and tear" %>
                        <%= o.radio_button :bathroom_rating, '0.5' %> <%= o.label :bathroom_rating, "better than expected" %>
                        <%= o.radio_button :bathroom_rating, '1.0' %> <%= o.label :bathroom_rating, "brand new or ideal" %>
                      </div>
                    </div>
                  </div>
                  <div class="panel-rating-header-last">
                    Windows

                    <div class="panel panel-rating">
                      <div class="star-rating3">
                        <%= o.hidden_field :windows_rating_percentage, value: '5' %>
                        <%= o.radio_button :windows_rating, '-1.0' %> <%= o.label :windows_rating, "Replace Immediatley" %>
                        <%= o.radio_button :windows_rating, '-0.5' %> <%= o.label :windows_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :windows_rating, '0.0' %> <%= o.label :windows_rating, "average wear and tear" %>
                        <%= o.radio_button :windows_rating, '0.5' %> <%= o.label :windows_rating, "better than expected" %>
                        <%= o.radio_button :windows_rating, '1.0' %> <%= o.label :windows_rating, "brand new or ideal" %>
                      </div>
                    </div>
                  </div>
                  <div class="panel-rating-header-last">
                    Garage

                    <div class="panel panel-rating">
                      <div class="star-rating4">
                        <%= o.hidden_field :garage_rating_percentage, value: '5' %>
                        <%= o.radio_button :garage_rating, '-1.0' %> <%= o.label :garage_rating, "Replace Immediatley" %>
                        <%= o.radio_button :garage_rating, '-0.5' %> <%= o.label :garage_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :garage_rating, '0.0' %> <%= o.label :garage_rating, "average wear and tear" %>
                        <%= o.radio_button :garage_rating, '0.5' %> <%= o.label :garage_rating, "better than expected" %>
                        <%= o.radio_button :garage_rating, '1.0' %> <%= o.label :garage_rating, "brand new or ideal" %>
                      </div>
                    </div>
                  </div>
                  <div class="panel-rating-header-last">
                    Roof

                    <div class="panel panel-rating">
                      <div class="star-rating5">
                        <%= o.hidden_field :roof_rating_percentage, value: '10' %>
                        <%= o.radio_button :roof_rating, '-1.0' %> <%= o.label :roof_rating, "Replace Immediatley" %>
                        <%= o.radio_button :roof_rating, '-0.5' %> <%= o.label :roof_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :roof_rating, '0.0' %> <%= o.label :roof_rating, "average wear and tear" %>
                        <%= o.radio_button :roof_rating, '0.5' %> <%= o.label :roof_rating, "better than expected" %>
                        <%= o.radio_button :roof_rating, '1.0' %> <%= o.label :roof_rating, "brand new or ideal" %>
                      </div>
                    </div>
                  </div>
                  <div class="panel-rating-header-last">
                    Plumbing

                    <div class="panel panel-rating">
                      <div class="star-rating6">
                        <%= o.hidden_field :plumbing_rating_percentage, value: '10' %>
                        <%= o.radio_button :plumbing_rating, '-1.0' %> <%= o.label :roof_rating, "Replace Immediatley" %>
                        <%= o.radio_button :plumbing_rating, '-0.5' %> <%= o.label :roof_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :plumbing_rating, '0.0' %> <%= o.label :roof_rating, "average wear and tear" %>
                        <%= o.radio_button :plumbing_rating, '0.5' %> <%= o.label :roof_rating, "better than expected" %>
                        <%= o.radio_button :plumbing_rating, '1.0' %> <%= o.label :roof_rating, "brand new or ideal" %>
                      </div>
                    </div>
                  </div>

                  <div class="panel-rating-header-last">
                    Furnace

                    <div class="panel panel-rating">
                      <div class="star-rating7">
                        <%= o.hidden_field :furnace_rating_percentage, value: '2.5' %>
                        <%= o.radio_button :furnace_rating, '-1.0' %> <%= o.label :furnace_rating, "Replace Immediatley" %>
                        <%= o.radio_button :furnace_rating, '-0.5' %> <%= o.label :furnace_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :furnace_rating, '0.0' %> <%= o.label :furnace_rating, "average wear and tear" %>
                        <%= o.radio_button :furnace_rating, '0.5' %> <%= o.label :furnace_rating, "better than expected" %>
                        <%= o.radio_button :furnace_rating, '1.0' %> <%= o.label :furnace_rating, "brand new or ideal" %>
                      </div>
                    </div>
                  </div>
                  <div class="panel-rating-header-last">
                    Elelctric

                    <div class="panel panel-rating">
                      <div class="star-rating8">
                        <%= o.hidden_field :electric_rating_percentage, value: '5' %>
                        <%= o.radio_button :electric_rating, '-1.0' %> <%= o.label :electric_rating, "Replace Immediatley" %>
                        <%= o.radio_button :electric_rating, '-0.5' %> <%= o.label :electric_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :electric_rating, '0.0' %> <%= o.label :electric_rating, "average wear and tear" %>
                        <%= o.radio_button :electric_rating, '0.5' %> <%= o.label :electric_rating, "better than expected" %>
                        <%= o.radio_button :electric_rating, '1.0' %> <%= o.label :electric_rating, "brand new or ideal" %>
                      </div>
                    </div>
                  </div>
                  <div class="panel-rating-header-last">
                    Basement

                    <div class="panel panel-rating">
                      <div class="star-rating9">
                        <%= o.hidden_field :basement_rating_percentage, value: '5' %>
                        <%= o.radio_button :basement_rating, '-1.0' %> <%= o.label :basement_rating, "Replace Immediatley" %>
                        <%= o.radio_button :basement_rating, '-0.5' %> <%= o.label :basement_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :basement_rating, '0.0' %> <%= o.label :basement_rating, "average wear and tear" %>
                        <%= o.radio_button :basement_rating, '0.5' %> <%= o.label :basement_rating, "better than expected" %>
                        <%= o.radio_button :basement_rating, '1.0' %> <%= o.label :basement_rating, "brand new or ideal" %>
                      </div>
                    </div>
                  </div>
                  <div class="panel-rating-header-last">
                    Foundation

                    <div class="panel panel-rating">
                      <div class="star-rating10">
                        <%= o.hidden_field :foundation_rating_percentage, value: '5' %>
                        <%= o.radio_button :foundation_rating, '-1.0' %> <%= o.label :foundation_rating, "Replace Immediatley" %>
                        <%= o.radio_button :foundation_rating, '-0.5' %> <%= o.label :foundation_rating, "Replace in the foreseable future" %>
                        <%= o.radio_button :foundation_rating, '0.0' %> <%= o.label :foundation_rating, "average wear and tear" %>
                        <%= o.radio_button :foundation_rating, '0.5' %> <%= o.label :foundation_rating, "better than expected" %>
                        <%= o.radio_button :foundation_rating, '1.0' %> <%= o.label :foundation_rating, "brand new or ideal" %>
                      </div>
                    </div>

                    <div>
                      What percentage of the purchase price will you be financing?

                      <% o.label :percentage_financing %>
                      <% o.number_field :percentage_financing, class: 'form-control', placeholder: "75" %>
                      <input type="text" id="percent-financed">
                    </div>

                    <div>
                      Who will be your escrow agent?
                      <%= o.label :escrow_agent %>
                      <%= o.text_field :escrow_agent, class: 'form-control', placeholder: "Escrow Agent" %>
                    </div>
                  </div>

                  <div class="panel-appointment">
                    <div class="row">
                      <div class="col-md-5">
                        Asking Price:
                        <%= @property.price %>
                      </div>
                      <div class="col-md-5" >

                          <p></p><% offer_price = @property.price %>




                      </div>
                    </div>


                    <div>

                    </div>

                  </div>

                </div>
              </div>

              <div>

                <!-- BUYER OFFERS -->

                <div id="buyeroffers1" class="panel-default-offer-inner" style="display:none;">
                    <p>
                        From: BUYER(S):
                        <% o.label :buyer_names %>
                        <%= o.text_field :buyer_names, class: 'form-control', placeholder: current_user.name  %>
                    </p>
                    <p>
                        To: OWNER OF RECORD ("SELLER"):
                    </p>
                    <p>
                        <% o.label :seller_names %>
                        <%= o.text_field :seller_names, class: 'form-control', placeholder: @property.user.name %>
                    </p>

                    <p>
                        Address:
                        <% o.label :seller_address %>
                        <%= o.text_field :seller_address, class: 'form-control', placeholder:  "#{@property.address} #{@property.city} #{@property.state} #{@property.zip}" %>
                    </p>
                    <p>
                        The <b>BUYER</b> offers to purchase the real property described as
                        <% o.label :property_address %>
                        <%= o.text_field :property_address, class: 'form-control', placeholder:  "#{@property.address} #{@property.city} #{@property.state} #{@property.zip}" %>
                        together with all buildings and improvements thereon (the "Premises") to which I have been introduced
                        by upon the following terms and conditions:
                    </p>
                </div>
              </div>

              <div>
                <div id="purchprice1" class="panel-default-offer-inner" style="display:none;">
                  <p class="contract-heading">1. Purchase Price:</p>

                  <p>
                    The BUYER agrees to pay the sum of $<input type="text" name="user[first_name]" id="offered-price" placeholder="<%= offer_price %>">

                    to the SELLER for the purchase of the Premises, due as follows:
                  </p>
                  <p>
                      i. $ <input type="number" min="100" max="1000" step="100" placeholder="100">
                      as a deposit to bind this Offer;
                  </p>
                    <p>
                      ii. $ <input type="number" min="100" max="1000" step="100" placeholder="100">
                      as an additional deposit upon executing the Purchase And Sale Agreement;
                    </p>
                  <p>
                    iii. Balance by bank's, cashier's, treasurer's or certified check or wire transfer at time for
                    closing.
                  </p>


                </div>
              </div>

              <div id="duration1" class="panel-default-offer-inner" style="display:none;">
                <div>
                  <p class="contract-heading"> 2. Duration Of Offer</p>


                <p>
                  This Offer is valid until
                  <% duration = (Date.today+7) %>

                  <input type="date" placeholder="<%= duration %>"> at
                  <input type="time" placeholder="5:00pm">
                  by which time a copy of this Offer shall be signed by the SELLER,
                  <span title="accepting means to agree to the offer"><b>accepting</b></span> this Offer and returned to
                  the BUYER, otherwise this Offer shall be deemed rejected and the money tendered herewith shall be returned
                  to the BUYER. Upon written notice to the BUYER or BUYER'S agent of the SELLER'S acceptance, the accepted
                  Offer shall form a <b>binding agreement</b>. Time is of the essence as to each provision.
                </p>
              </div>
              </div>
                <div id="pnsagreement1" class="panel-default-offer-inner" style="display:none;">

                  <p class="contract-heading">3.Purchase And Sale Agreement</p>
                    <p>The SELLER and the BUYER shall, on or before</p>

                    <%# o.label :closing_date %>
                    <%# o.text_field :closing_date, class: 'form-control', placeholder: "Closing Date/Time" %>
                  <input type="date" placeholder="<%= duration %>">
                  <input type="time" placeholder="5:00pm">


                 <p>execute the <b>Standard Purchase and Sale Agreement</b> of the MASSACHUSETTS ASSOCIATION OF
                  REALTORS® or substantial equivalent which, when executed, shall become the entire agreement between the
                  parties and this Offer shall have no further force and effect. </p>

                </div>
              </div>
              <div>
                <div id="closing1" class="panel-default-offer-inner" style="display:none;">
                  <p class="contract-heading">4.Closing</p>
                  <p>The SELLER agrees to deliver a good and sufficient deed conveying good and clear record and
                    marketable title at

                    <% o.label :closing_date %>
                    <%= o.text_field :closing_date, class: 'form-control', placeholder: "Closing Date/Time" %>

                   (same date as closing) a.m./p.m. at the County Registry
                  of Deeds or such other time or place as may be mutually agreed upon by the parties.</p>
                  <input type="text" placeholder="closing place">
                </div>
              </div>
              <div>
                <div id="escrow1" class="panel-default-offer-inner" style="display:none;">
                  <p class="contract-heading">5. Escrow</p>

                  <p>The deposit shall be held by <input type="text" name="user[first_name]">,
                  as escrow agent, subject to the terms hereof. Endorsement or negotiation of this
                  deposit by the real estate broker shall not be deemed acceptance of the terms of
                  the Offer. In the event of any disagreement between the parties concerning to whom
                  escrowed funds should be paid, the escrow agent may retain said deposit pending
                  written instructions mutually given by the BUYER and SELLER. The escrow agent shall
                  abide by any Court decision concerning to whom the funds shall be paid and shall not
                  be made a party to a pending lawsuit solely as a result of holding escrowed funds.
                  Should the escrow agent be made a party in violation of this paragraph, the escrow
                  agent shall be dismissed and the party asserting a claim against the escrow agent
                  shall pay the agent's reasonable attorneys' fees and costs.</p>
                </div>
              </div>
              <div>
                <div id="contingencies1" class="panel-default-offer-inner" style="display:none;">
                  <p class="contract-heading">6.Contingencies</p>
                  <p>
                  It is agreed that the BUYER'S obligations under this Offer and any Purchase and Sale
                  Agreement signed pursuant to this Offer are expressly conditioned upon the following
                  terms and conditions:
                  </p>
                </div>
              </div>
              <div>
                <div id="mortgage1" class="panel-default-offer-inner" style="display:none;">
                  <p class="contract-heading">a.Mortgage</p>
                  <p>
                      <input type="checkbox" placeholder="check to waive">
                      (Check If Waived)
                  </p>
                  <p>

                  </p>
                  The BUYER'S obligation to purchase is conditioned upon obtaining a written commitment for
                  financing in the amount of $ (what percent of price are you financing???????)
                  <input type="text" name="user[first_name]" placeholder="Cash Amount" id="financed-amount">
                  at prevailing rates, terms and conditions by <input type="text" name="user[first_name]" placeholder="Date/Time">
                  </p>
                    <p>


                  <%= current_user.name %>. The BUYER shall have an obligation to act reasonably diligently
                  to satisfy any condition within the BUYER'S control. If, despite reasonable efforts, the
                  BUYER has been unable to obtain such written commitment the BUYER may terminate this agreement
                  by giving written notice that is received by 5:00 p.m. on the calendar day after the date set
                  forth above. In the event that notice has not been received, this condition is deemed waived.
                  In the event that due notice has been received, the obligations of the parties shall cease and
                  this agreement shall be void; and all monies deposited by the BUYER shall be returned. In no event
                  shall the BUYER be deemed to have used reasonable efforts to obtain financing unless the BUYER has
                  submitted one application by
                  <%= o.label :mortgage_application_date %>
                  <%= o.text_field :mortgage_application_date, class: 'form-control', placeholder: "Mortgage Application Date" %>

                  and acted reasonably promptly in providing additional information requested by the mortgage lender.
                    </p>
                </div>
              </div>
              <div>
                <div id="inspections1" class="panel-default-offer-inner" style="display:none;">
                  <p class="contract-heading">b.Inspections</p>
                  <p>
                    <input type="checkbox" placeholder="check to waive">
                    (Check If Waived)
                  </p>
                  <p>The BUYER'S obligations under this agreement are subject to the right
                  to obtain inspection(s) of the Premises or any aspect thereof, including, but not limited to, home,
                  pest, radon,lead paint, septic/sewer, water quality, and water drainage by consultant(s) regularly in the business
                  of conducting said inspections, of BUYER'S own choosing, and at BUYER'S sole cost within
                  <%= o.label :inspection_date %>
                  <%= o.text_field :inspection_date, class: 'form-control', placeholder: "Inspection Date" %>(7 days)
                  <%= duration %>
                  days after SELLER'S acceptance of this agreement. If the results are not satisfactory to BUYER, in BUYER'S sole
                  discretion, BUYER shall have the right to give written notice received by the SELLER or SELLER'S agent
                  by 5:00 p.m. on the calendar day after the date set forth above, terminating this agreement. Upon receipt
                  of such notice this agreement shall be void and all monies deposited by the BUYER shall be returned. Failure
                  to provide timely notice of termination shall constitute a waiver. In the event that the BUYER does not
                  exercise the right to have such inspection(s) or to so terminate, the SELLER and the listing broker are each
                  released from claims relating to the condition of the Premises that the BUYER or the BUYER'S consultants could
                  reasonably have discovered.
                  </p>
                </div>
              </div>
              <div>
                <div id="representations1" class="panel-default-offer-inner" style="display:none;">
                  <p class="contract-heading">7. Representations/Acknowledgments</p>
                  <p>
                  The BUYER acknowledges receipt of an agency disclosure, lead
                  paint disclosure (for residences built before 1978), Home Inspectors Facts For Consumers brochure
                  (prepared by the Office of Consumer Affairs). The BUYER is not relying upon any representation, verbal or
                  written, from any real estate broker or licensee concerning legal use. Any reference to the category (single family,
                  multi-family, residential, commercial) or the use of this property in any advertisement or listing sheet,
                  including the number of units, number of rooms or other classification is not a representation concerning legal use
                  or compliance with zoning by-laws, building code, sanitary code or other public or private restrictions
                  by the broker. The BUYER understands that if this information is important to BUYER, it is the duty of the
                  BUYER to seek advice from an attorney or written confirmation from the municipality. In addition, the BUYER
                  acknowledges that there are no warranties or representations on which BUYER relies in making this Offer,
                  except those previously made in writing and the following <input type="text" name="user[first_name]">
                  : (if none, write “NONE”):
                  </p>
                </div>
              </div>
              <div>
                <div id="buyerdefault1" class="panel-default-offer-inner" style="display:none;">
                  <p class="contract-heading">8. Buyer's Default.</p>
                  <p>
                    If the BUYER defaults in BUYER'S obligations, all monies tendered as a deposit shall be
                    paid to the SELLER as liquidated damages and this shall be SELLER'S sole remedy.
                  </p>
                </div>
                <div>
                  <div id="addterms1" class="panel-default-offer-inner" style="display:none;">
                    <p class="contract-heading">9.Additional Terms.</p>
                    <p>
                      <%= o.label :additional_terms %>
                      <%= o.text_field :additional_terms, class: 'form-control', placeholder: "Additional Terms" %>
                      BUYER <input type="text" name="user[first_name]" placeholder="Buyer Name">
                      Date <input type="text" name="user[first_name]" placeholder="Date/Time">
                      BUYER <input type="text" name="user[first_name]" placeholder="Buyer Name">
                      Date <input type="text" name="user[first_name]" placeholder="Date/Time">
                    </p>

                  </div>
                  <div class="form-group" id="property-create">
                    <%= o.button "Save Offer", class: 'btn btn-success btn-block', data: {disable_with: "<i class='fa fa-spinner fa-spin'></i> Creating Offer..."} %>

                  </div>
                </div>
              </div>
            </div>
      <% end %>
      </div>
    </div>





<script>
    property_value = gon.property.price;


  $('#new_add_offer input:radio').click(function(event){
      var target = event.currentTarget;
      console.log('radio name',target.name);
      console.log('radio name value', target.value);
      console.log('hidden', $(target).parent().find(':hidden')[0].value);
      var value = (($(target).parent().find(':hidden')[0].value)*(target.value)*(1000));
      console.log(value);

      var full_math = ((property_value)+(value));
      console.log('full math', (full_math));
      property_value = full_math
      console.log('property value', (property_value));

      $( "#suggested_price h4" ).html(property_value);

      $("#offered-price").attr("placeholder", property_value);






        $('#percent-financed').keyup(function() {                  // When the email is change
            var textOne = document.getElementById("percent-financed");
            var textTwo = document.getElementById("financed-amount");
            //Get the value of textOne textbox input
            var textOneValue = textOne.value;

            var textTwoValue = textOneValue;

            var textOneInt = parseInt(textOneValue);
            var totalMort = (textOneInt / 100)* property_value;
            //Assign the value of textOne textbox to textTwo textbox
            textTwo.value = totalMort;
            $("#financed-amount").attr("placeholder",  totalMort);
        });

  });


//    var textOne = document.getElementById("percent-financed");
//    var textTwo = document.getElementById("financed-amount");
//    //Get the value of textOne textbox input
//    var textOneValue = textOne.value;
//
//    var textTwoValue = textOneValue;
//    //Assign the value of textOne textbox to textTwo textbox
//    textTwo.value = textTwoValue;

</script>



